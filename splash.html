
<!doctype html>
<html lang="uz" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#070b13" />
  <title>TOSHKENT BALIQCHI — Splash</title>
  <meta name="robots" content="noindex" />
  <style>
    :root{
      --bg0:#05070d;
      --bg1:#070b13;
      --gold0:#ffcf4a;
      --gold1:#ffb400;
      --gold2:#ffea9b;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --border: rgba(255,255,255,.14);
      --shadow: 0 24px 90px rgba(0,0,0,.55);
      --glass: blur(16px);
      --radius: 26px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      color: var(--text);
      background:
        radial-gradient(1100px 680px at 15% 20%, rgba(255,180,0,.18), transparent 60%),
        radial-gradient(900px 520px at 85% 30%, rgba(255,234,155,.10), transparent 60%),
        radial-gradient(800px 500px at 50% 90%, rgba(58,160,255,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow:hidden;
    }
    .wrap{
      height:100%;
      display:grid;
      place-items:center;
      padding: 22px;
    }
    .card{
      width:min(560px, 100%);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      backdrop-filter: var(--glass);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      text-align:center;
      padding: 26px 18px 18px;
    }
    .sheen{
      position:absolute; inset:-60% -40%;
      background: conic-gradient(from 230deg,
        rgba(255,180,0,0),
        rgba(255,180,0,.22),
        rgba(255,234,155,.16),
        rgba(58,160,255,.12),
        rgba(255,180,0,0));
      filter: blur(16px);
      animation: sheen 2.8s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sheen{
      0%,100%{ transform: translate3d(-2%, -2%, 0) rotate(0deg); opacity:.85; }
      50%{ transform: translate3d(2%, 2%, 0) rotate(18deg); opacity:.72; }
    }
    .fish{
      width: 140px; height: 140px;
      margin: 6px auto 8px;
      filter:
        drop-shadow(0 24px 24px rgba(0,0,0,.35))
        drop-shadow(0 0 18px rgba(255,180,0,.22));
      transform-origin: 50% 55%;
      animation:
        spin-in 2.2s cubic-bezier(.4,0,.2,1) .12s 1 both,
        bob 2.1s ease-in-out .12s infinite,
        glow 1.7s ease-in-out .12s infinite;
    }
    @keyframes spin-in{
      0%{ transform: rotate(0deg) scale(.90); opacity:0; }
      18%{ opacity:1; }
      74%{ transform: rotate(720deg) scale(1); }
      100%{ transform: rotate(760deg) scale(1); }
    }
    @keyframes bob{
      0%,100%{ translate: 0 0; }
      50%{ translate: 0 -7px; }
    }
    @keyframes glow{
      0%,100%{ filter: drop-shadow(0 24px 24px rgba(0,0,0,.35)) drop-shadow(0 0 18px rgba(255,180,0,.18)); }
      50%{ filter: drop-shadow(0 24px 24px rgba(0,0,0,.35)) drop-shadow(0 0 28px rgba(255,180,0,.34)); }
    }
    h1{
      margin: 10px 0 6px;
      font-size: clamp(22px, 4.8vw, 34px);
      font-weight: 950;
      letter-spacing: .10em;
      text-transform: uppercase;
      opacity: 0;
      transform: translateY(10px);
      animation: pop 1.05s ease .55s forwards;
    }
    p{
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.45;
      opacity: 0;
      transform: translateY(10px);
      animation: pop 1.05s ease .82s forwards;
    }
    @keyframes pop{ to{ opacity:1; transform: translateY(0); } }
    .actions{
      display:flex;
      justify-content:center;
      gap: 10px;
      margin-top: 14px;
      flex-wrap:wrap;
    }
    .pill{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.07);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .15s ease;
    }
    .pill:hover{ background: rgba(255,255,255,.11); transform: translateY(-1px); }
    .pill:active{ transform: translateY(0); }
    .pill svg{ width: 18px; height: 18px; }
    .tiny{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.62);
      opacity:.95;
    }
    .progress{
      height: 6px;
      width: min(420px, 100%);
      margin: 14px auto 0;
      background: rgba(255,255,255,.10);
      border-radius: 999px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,234,155,.90), rgba(255,180,0,.92));
      border-radius: 999px;
      animation: load 2.8s ease forwards;
    }
    @keyframes load{
      to{ width: 100%; }
    }
    @media (prefers-reduced-motion: reduce){
      .fish,.sheen,.bar{ animation: none !important; }
      h1,p{ opacity:1; transform:none; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="dialog" aria-modal="true" aria-label="TOSHKENT BALIQCHI splash">
      <div class="sheen" aria-hidden="true"></div>

      <!-- Gold fish icon -->
      <svg class="fish" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg" aria-label="Gold fish icon">
        <defs>
          <linearGradient id="goldBody" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#ffea9b"/>
            <stop offset="0.5" stop-color="#ffcf4a"/>
            <stop offset="1" stop-color="#ffb400"/>
          </linearGradient>
          <linearGradient id="goldFin" x1="0" y1="1" x2="1" y2="0">
            <stop offset="0" stop-color="#ffd873"/>
            <stop offset="1" stop-color="#ff9f00"/>
          </linearGradient>
        </defs>

        <!-- tail -->
        <path d="M26 70c-10-13-12-30-7-48 20 8 36 20 46 38-14 3-23 5-39 10z" fill="url(#goldFin)" opacity=".92"/>
        <path d="M26 70c-10 13-12 30-7 48 20-8 36-20 46-38-14-3-23-5-39-10z" fill="url(#goldFin)" opacity=".82"/>

        <!-- body -->
        <ellipse cx="82" cy="70" rx="46" ry="30" fill="url(#goldBody)"/>
        <ellipse cx="76" cy="70" rx="26" ry="18" fill="rgba(255,255,255,.22)"/>

        <!-- fin -->
        <path d="M76 48c10 5 20 15 22 22-12-2-21-4-32 3 0-10 4-19 10-25z" fill="url(#goldFin)" opacity=".92"/>

        <!-- eye -->
        <circle cx="104" cy="62" r="7" fill="rgba(255,255,255,.95)"/>
        <circle cx="106" cy="62" r="2.8" fill="#07101c"/>

        <!-- mouth -->
        <path d="M118 74c-5 4-12 4-17 0" fill="none" stroke="rgba(0,0,0,.35)" stroke-width="3.4" stroke-linecap="round"/>

        <!-- sparkles -->
        <path d="M110 38l2 6 6 2-6 2-2 6-2-6-6-2 6-2 2-6z" fill="rgba(255,234,155,.85)"/>
        <circle cx="124" cy="52" r="2.6" fill="rgba(255,234,155,.72)"/>
      </svg>

      <h1 id="title">TOSHKENT BALIQCHI</h1>
      <p id="subtitle">TOSHKENT BALIQCHIGA XUSH KELIBSIZ</p>

      <div class="progress" aria-hidden="true"><div class="bar"></div></div>
      <div class="actions">
        <div class="pill" id="btnSound" role="button" tabindex="0" aria-label="Voice welcome">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M11 5 6 9H3v6h3l5 4V5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M15 9a4 4 0 0 1 0 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Ovoz</span>
        </div>
        <div class="pill" id="btnSkip" role="button" tabindex="0" aria-label="Skip">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M5 6v12l10-6-10-6Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M19 6v12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>O‘tkazib yuborish</span>
        </div>
      </div>

      <div class="tiny">Авто кириш • Auto enter</div>
    </div>
  </div>

  <script>
    /**
     * Splash behavior:
     * - Dark-only entrance page
     * - Gold fish animation
     * - Optional voice (audio file preferred; fallback to speechSynthesis)
     * - Auto redirect to index.html
     */

    const REDIRECT_TO = "index.html";
    const DURATION_MS = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches ? 900 : 3000;

    const $ = (s, r = document) => r.querySelector(s);

    function speakWelcome() {
      const lang = localStorage.getItem("tb_lang") || "uz";
      const uzText = "Assalomu alaykum! Toshkent Baliqchiga xush kelibsiz. Buyurtma uchun qo‘ng‘iroq qiling yoki Telegramga yozing.";
      const ruText = "Здравствуйте! Добро пожаловать в Toshkent Baliqchi. Для заказа позвоните или напишите в Telegram.";
      const text = lang === "ru" ? ruText : uzText;

      // Prefer real recorded audio if you add files:
      //   /assets/voice/uz.mp3
      //   /assets/voice/ru.mp3
      const audioSrc = lang === "ru" ? "assets/voice/ru.mp3" : "assets/voice/uz.mp3";
      const audio = new Audio(audioSrc);
      audio.volume = 1;

      audio.play().catch(() => {
        if (!("speechSynthesis" in window)) return;
        try {
          window.speechSynthesis.cancel();
          const u = new SpeechSynthesisUtterance(text);
          u.rate = 1;
          u.pitch = 1;

          const voices = window.speechSynthesis.getVoices?.() || [];
          const prefer = lang === "ru"
            ? ["ru-ru", "ru"]
            : ["uz-uz", "uz", "tr-tr", "tr"]; // Uzbek often missing; Turkish is a decent fallback
          const v = voices.find(vx => prefer.some(p => (vx.lang || "").toLowerCase().includes(p)));
          if (v) u.voice = v;

          window.speechSynthesis.speak(u);
        } catch (_) {}
      });
    }

    function goNext() {
      // Keep a flag if you want to prevent showing splash repeatedly later
      sessionStorage.setItem("tb_splash_done", "1");
      window.location.replace(REDIRECT_TO);
    }

    const timer = setTimeout(goNext, DURATION_MS);

    $("#btnSkip").addEventListener("click", () => { clearTimeout(timer); goNext(); });
    $("#btnSkip").addEventListener("keydown", (e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); clearTimeout(timer); goNext(); } });

    $("#btnSound").addEventListener("click", speakWelcome);
    $("#btnSound").addEventListener("keydown", (e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); speakWelcome(); } });

    // Ensure voices are loaded in some browsers
    if ("speechSynthesis" in window) window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>