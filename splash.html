<!doctype html>
<html lang="uz" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#070b13" />
  <title>TOSHKENT BALIQCHI - Splash</title>
  <meta name="robots" content="noindex" />
  <style>
    :root{
      --bg0:#03050a;
      --bg1:#070b13;
      --gold0:#ffea9b;
      --gold1:#ffcf4a;
      --gold2:#ffb400;
      --gold3:#ff8a00;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --shadow: 0 28px 120px rgba(0,0,0,.6);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      color: var(--text);
      background:
        radial-gradient(900px 600px at 20% 15%, rgba(255,180,0,.22), transparent 60%),
        radial-gradient(820px 540px at 85% 30%, rgba(255,234,155,.12), transparent 60%),
        radial-gradient(700px 520px at 50% 90%, rgba(46,230,166,.08), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow:hidden;
    }
    .wrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap: 10px;
      padding: 22px;
      position:relative;
      text-align:center;
    }
    .halo{
      position:absolute;
      width: 560px;
      height: 560px;
      border-radius: 50%;
      background:
        radial-gradient(circle at 50% 50%, rgba(255,234,155,.22), rgba(255,180,0,.10) 40%, transparent 62%);
      filter: blur(2px);
      opacity:.95;
      animation: pulse 3.2s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); opacity:.85; }
      50%{ transform: scale(1.04); opacity:1; }
    }
    .fish{
      width: 180px; height: 180px;
      filter:
        drop-shadow(0 24px 24px rgba(0,0,0,.35))
        drop-shadow(0 0 22px rgba(255,180,0,.28));
      transform-origin: 50% 55%;
      animation:
        spin-in 2.2s cubic-bezier(.4,0,.2,1) .12s 1 both,
        bob 2.1s ease-in-out .12s infinite,
        glow 1.7s ease-in-out .12s infinite;
      z-index: 1;
    }
    @keyframes spin-in{
      0%{ transform: rotate(0deg) scale(.90); opacity:0; }
      18%{ opacity:1; }
      74%{ transform: rotate(720deg) scale(1); }
      100%{ transform: rotate(760deg) scale(1); }
    }
    @keyframes bob{
      0%,100%{ translate: 0 0; }
      50%{ translate: 0 -7px; }
    }
    @keyframes glow{
      0%,100%{ filter: drop-shadow(0 24px 24px rgba(0,0,0,.35)) drop-shadow(0 0 18px rgba(255,180,0,.18)); }
      50%{ filter: drop-shadow(0 24px 24px rgba(0,0,0,.35)) drop-shadow(0 0 30px rgba(255,180,0,.36)); }
    }
    .title{
      display:grid;
      gap: 4px;
      text-transform: uppercase;
      letter-spacing: .14em;
      font-weight: 950;
      line-height: 1.08;
      background: linear-gradient(180deg, var(--gold0), var(--gold1) 55%, var(--gold3));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 18px 40px rgba(0,0,0,.45);
      opacity: 0;
      transform: translateY(10px);
      animation: pop 1.05s ease .55s forwards;
      z-index: 1;
    }
    .title .line1{ font-size: clamp(24px, 5.6vw, 40px); }
    .title .line2{ font-size: clamp(18px, 4.8vw, 34px); letter-spacing:.12em; }
    @keyframes pop{ to{ opacity:1; transform: translateY(0); } }
    .progress{
      height: 6px;
      width: min(420px, 100%);
      margin: 12px auto 0;
      background: rgba(255,255,255,.10);
      border-radius: 999px;
      overflow:hidden;
      z-index: 1;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,234,155,.90), rgba(255,180,0,.92));
      border-radius: 999px;
      animation: load 2.8s ease forwards;
    }
    @keyframes load{ to{ width: 100%; } }
    .actions{
      display:flex;
      justify-content:center;
      gap: 10px;
      margin-top: 14px;
      flex-wrap:wrap;
      z-index: 1;
    }
    .pill{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 999px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .15s ease;
      box-shadow: var(--shadow);
    }
    .pill:hover{ background: rgba(255,255,255,.11); transform: translateY(-1px); }
    .pill:active{ transform: translateY(0); }
    .pill svg{ width: 18px; height: 18px; }
    .tiny{
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
      opacity:.95;
      z-index: 1;
    }
    @media (prefers-reduced-motion: reduce){
      .fish,.bar,.halo{ animation: none !important; }
      .title{ opacity:1; transform:none; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="halo" aria-hidden="true"></div>

    <!-- Gold fish icon -->
    <svg class="fish" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-label="Gold fish icon">
      <defs>
        <linearGradient id="goldBody" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#ffea9b"/>
          <stop offset="0.45" stop-color="#ffcf4a"/>
          <stop offset="1" stop-color="#ff8a00"/>
        </linearGradient>
        <linearGradient id="goldFin" x1="0" y1="1" x2="1" y2="0">
          <stop offset="0" stop-color="#ffd873"/>
          <stop offset="1" stop-color="#ff9f00"/>
        </linearGradient>
        <radialGradient id="goldGlow" cx="50%" cy="45%" r="50%">
          <stop offset="0" stop-color="#fff2c7" stop-opacity=".9"/>
          <stop offset=".65" stop-color="#ffcf4a" stop-opacity=".5"/>
          <stop offset="1" stop-color="#ff8a00" stop-opacity=".1"/>
        </radialGradient>
      </defs>

      <circle cx="100" cy="100" r="70" fill="url(#goldGlow)" opacity=".4"/>

      <!-- tail -->
      <path d="M36 100c-14-18-16-40-10-64 28 10 48 26 62 50-18 4-31 8-52 14z" fill="url(#goldFin)" opacity=".92"/>
      <path d="M36 100c-14 18-16 40-10 64 28-10 48-26 62-50-18-4-31-8-52-14z" fill="url(#goldFin)" opacity=".82"/>

      <!-- body -->
      <ellipse cx="118" cy="100" rx="60" ry="38" fill="url(#goldBody)"/>
      <ellipse cx="108" cy="100" rx="34" ry="22" fill="rgba(255,255,255,.20)"/>

      <!-- fin -->
      <path d="M108 74c13 7 26 19 29 28-16-3-28-6-42 4 1-13 6-25 13-32z" fill="url(#goldFin)" opacity=".92"/>

      <!-- eye -->
      <circle cx="144" cy="92" r="8" fill="rgba(255,255,255,.95)"/>
      <circle cx="146" cy="92" r="3.2" fill="#07101c"/>

      <!-- mouth -->
      <path d="M164 108c-6 5-16 5-22 0" fill="none" stroke="rgba(0,0,0,.35)" stroke-width="4" stroke-linecap="round"/>

      <!-- sparkles -->
      <path d="M148 56l3 8 8 3-8 3-3 8-3-8-8-3 8-3 3-8z" fill="rgba(255,234,155,.85)"/>
      <circle cx="168" cy="74" r="3" fill="rgba(255,234,155,.72)"/>
    </svg>

    <div class="title" aria-label="TOSHKENT BALIQCHI GA XUSH KELIBSIZ">
      <div class="line1">TOSHKENT BALIQCHI GA</div>
      <div class="line2">XUSH KELIBSIZ</div>
    </div>

    <div class="progress" aria-hidden="true"><div class="bar"></div></div>
    <div class="actions">
      <div class="pill" id="btnSound" role="button" tabindex="0" aria-label="Voice welcome">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M11 5 6 9H3v6h3l5 4V5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M15 9a4 4 0 0 1 0 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Ovoz</span>
      </div>
      <div class="pill" id="btnSkip" role="button" tabindex="0" aria-label="Skip">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M5 6v12l10-6-10-6Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M19 6v12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>O'tkazib yuborish</span>
      </div>
    </div>

    <div class="tiny">Avto kirish • Auto enter</div>
  </div>

  <script>
    /**
     * Splash behavior:
     * - Dark-only entrance page
     * - Gold fish animation
     * - Optional voice (audio file preferred; fallback to speechSynthesis)
     * - Auto redirect to index.html
     */

    const REDIRECT_TO = "index.html";
    const DURATION_MS = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches ? 900 : 3000;

    const $ = (s, r = document) => r.querySelector(s);

    function speakWelcome() {
      const lang = localStorage.getItem("tb_lang") || "uz";
      const uzText = "Assalomu alaykum! Toshkent Baliqchiga xush kelibsiz. Buyurtma uchun qo'ng'iroq qiling yoki Telegramga yozing.";
      const ruText = "Здравствуйте! Добро пожаловать в Toshkent Baliqchi. Для заказа позвоните или напишите в Telegram.";
      const text = lang === "ru" ? ruText : uzText;

      // Prefer real recorded audio if you add files:
      //   /assets/voice/uz.mp3
      //   /assets/voice/ru.mp3
      const audioSrc = lang === "ru" ? "assets/voice/ru.mp3" : "assets/voice/uz.mp3";
      const audio = new Audio(audioSrc);
      audio.volume = 1;

      audio.play().catch(() => {
        if (!("speechSynthesis" in window)) return;
        try {
          window.speechSynthesis.cancel();
          const u = new SpeechSynthesisUtterance(text);
          u.rate = 1;
          u.pitch = 1;

          const voices = window.speechSynthesis.getVoices?.() || [];
          const prefer = lang === "ru"
            ? ["ru-ru", "ru"]
            : ["uz-uz", "uz", "tr-tr", "tr"];
          const v = voices.find(vx => prefer.some(p => (vx.lang || "").toLowerCase().includes(p)));
          if (v) u.voice = v;

          window.speechSynthesis.speak(u);
        } catch (_) {}
      });
    }

    function goNext() {
      sessionStorage.setItem("tb_splash_done", "1");
      window.location.replace(REDIRECT_TO);
    }

    const timer = setTimeout(goNext, DURATION_MS);

    $("#btnSkip").addEventListener("click", () => { clearTimeout(timer); goNext(); });
    $("#btnSkip").addEventListener("keydown", (e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); clearTimeout(timer); goNext(); } });

    $("#btnSound").addEventListener("click", speakWelcome);
    $("#btnSound").addEventListener("keydown", (e) => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); speakWelcome(); } });

    if ("speechSynthesis" in window) window.speechSynthesis.onvoiceschanged = () => {};
  </script>
</body>
</html>
